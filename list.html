<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <div class="container">
      <h2>Grocery bud</h2>

      <form id="grocery-form">
        <input type="text" id="grocery-input" placeholder="Add items" />
        <input type="date" id="date-input" />
        <button type="submit">Add Items</button>
      </form>

      <div id="grocery-container">
        <ul id="grocery-list"></ul>
      </div>
      <p id="empty-message">No items are added!</p>
    </div>

    <script>
      const form = document.getElementById("grocery-form");
      const groceryList = document.getElementById("grocery-list");
      const groceryInput = document.getElementById("grocery-input");
      const dateInput = document.getElementById("date-input");
      const emptyMessage = document.getElementById("empty-message");

      function checkEmptyMessage() {
        if (groceryList.children.length === 0) {
          emptyMessage.style.display = "block";
        } else {
          emptyMessage.style.display = "none";
        }
      }

      form.addEventListener("submit", function (event) {
        event.preventDefault();

        const groceryItem = groceryInput.value;
        const date = dateInput.value;

        if (groceryItem === "") return alert("Item cannot be empty");

        if (date === "") return alert("Please select a date");

        const li = document.createElement("li");

        //for checkbox
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";

        li.appendChild(checkbox);

        const textNode = document.createTextNode(
          groceryItem + (date ? " (" + date + ")" : ""),
        );

        li.appendChild(textNode);

        const btnGroup = document.createElement("div");
        const submitBtn = form.querySelector("button");

        //Edit button
        const editButton = document.createElement("button");
        editButton.innerHTML = '<i class="fa-solid fa-pen-to-square"></i>';
        editButton.onclick = function () {
          groceryInput.value = groceryItem;
          dateInput.value = date;
          submitBtn.textContent = "Update Item";
          li.remove();
        };

        // Delete button
        const deleteButton = document.createElement("button");
        deleteButton.innerHTML = '<i class="fa-solid fa-trash-can"></i>';
        deleteButton.onclick = function () {
          li.remove();
          checkEmptyMessage();
        };

        btnGroup.appendChild(editButton);
        btnGroup.appendChild(deleteButton);
        li.appendChild(btnGroup);
        groceryList.appendChild(li);
        checkEmptyMessage();

        groceryInput.value = "";
        dateInput.value = "";
        submitBtn.textContent = "Add Items";
      });
      checkEmptyMessage();
    </script>
  </body>
</html>
